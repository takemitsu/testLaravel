<div ng-controller="DetailController">

	<!-- 親情報 -->
	<div class="panel panel-default">
		<div class="panel-heading">
			<div class="row">
				<div class="col-md-5">
					{{ topic.subject }}
				</div>
				<div class="col-md-5 text-right">
					<span class="text-warning"> {{ topic.name }}</span>
				</div>
				<div class="col-md-2"></div>
			</div>
		</div>
		<div class="panel-body">
			<p style="white-space: pre-line;">{{ topic.comment }}</p>
		</div>
	</div>

	<p class="text-right">
		<button class="btn btn-default" ng-click="reloadComment()">更新</button>
	</p>

	<form name="fm">
		<div class="form-group">
			<input type="text" class="form-control input-sm" name="name" ng-model="postData.name" required placeholder="名前">
			<span class="error" ng-show="fm.name.$error.required">名前を入力してください</span>
		</div>
		<div class="form-group">
			<textarea class="form-control" rows="3" name="comment" ng-model="postData.comment" required placeholder="内容"></textarea>
			<span class="error" ng-show="fm.comment.$error.required">内容を入力してください</span>
		</div>
		<p class="text-right">
			<button class="btn btn-default btn-primary" ng-click="save()">コメントする</button>
		</p>
	</form>

	<div class="text-center" ng-show="loading"><span class="fa fa-meh-o fa-5x fa-spin"></span></div>

	<div class="panel panel-default" ng-hide="loading">
		<div class="panel-body">
			<div ng-show="comments.length == 0">
				nodata
			</div>
			<div ng-repeat="c in comments">
				<div class="row" style="border-bottom: solid 1px #f0f0f0; padding: 10px 0;">
					<div class="col-md-10 text-right">
						<span class="text-warning"> {{ c.name }}</span>
					</div>
					<div class="col-md-2 text-right">
						<button ng-click="deleteComment(c.id)" class="btn btn-danger btn-xs" style="cursor:pointer;">削除</button>
					</div>
				</div>
				<div class="row" style="border-bottom: solid 1px #f0f0f0; padding: 10px 0;">
					<div class="col-md-12">
						<p style="white-space: pre-line;">{{ c.comment }}</p>
					</div>
				</div>
			</div>
		</div>
	</div>

</div>
